/*! For license information please see birthdaypicker.min.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("BirthdayPicker",[],e):"object"==typeof exports?exports.BirthdayPicker=e():t.BirthdayPicker=e()}(this,(function(){return function(){"use strict";var t={d:function(e,n){for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}},e={};function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}t.d(e,{default:function(){return k}});var r=function(t,e,n,r){return function(t,e,n,r){if(e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.setAttribute(a,e[a]);if(n)for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t.style[i]=n[i]);return r&&(t.innerHTML=r),t}(document.createElement(t),e,n,r)},a=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(void 0===e)return t.dataset;var r=t.dataset[e];if(void 0===r)return!1;try{r=JSON.parse(r.replaceAll("'",'"'))}catch(t){}var a={},i=e.length;return Object.entries(t.dataset).forEach((function(t){if(t[0].toLowerCase().indexOf(e)>=0&&t[0].length>i){var r=t[0][i].toLowerCase()+t[0].substring(i+1);n&&void 0!==n[r]&&(a[r]=t[1])}})),Object.assign(a,r)},i=function(t){return 0==+t%4&&0!=+t%100||0==+t%400},o={_storage:new WeakMap,put:function(t){this._storage.has(t)||this._storage.set(t,new Map);for(var e=arguments.length,r=new Array(e>1?e-1:0),a=1;a<e;a++)r[a-1]=arguments[a];if(r.length>1)this._storage.get(t).set(r[0],r[1]);else if("object"===n(r[0]))for(var i in r[0])({}).hasOwnProperty.call(r[0],i)&&this._storage.get(t).set(i,r[0][i])},get:function(t,e){return this._storage.has(t)?e?this._storage.get(t).get(e):this._storage.get(t):new Map},has:function(t,e){return this._storage.has(t)&&this._storage.get(t).has(e)},remove:function(t,e){if(!this._storage.has(t))return!1;var n=this._storage.get(t).delete(e);return 0===!this._storage.get(t).size&&this._storage.delete(t),n}},s=function(t,e,n){if(t=parseFloat(t,10),e=parseFloat(e,10),(n=parseFloat(n,10))<e){var r=n;n=e,e=r}return!isNaN(e)&&t<e?e:!isNaN(n)&&t>n?n:t};function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,i,o,s=[],h=!0,u=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);h=!0);}catch(t){u=!0,a=t}finally{try{if(!h&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,d(r.key),r)}}function d(t){var e=function(t,e){if("object"!==h(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e);if("object"!==h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t,"string");return"symbol"===h(e)?e:String(e)}var f,y=[],g="data-birthdaypicker",m=["short","long","numeric"],v=["datechange"],p=new Date,_=p.getFullYear(),b=p.getMonth()+1,D=p.getDate(),E=!1,L=function(){function t(e,n){var r,i,s,h=this;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,s=function(t){t&&(t.target===h._year.el?h._yearChanged(t.target.value):t.target===h._month.el?h._monthChanged(t.target.value):t.target===h._day.el&&h._dayChanged(t.target.value)),h.settings.noFutureDate&&h._nofuturDate(),h._prevent||h._triggerEvent(v[0])},(i=d(i="_dateChanged"))in r?Object.defineProperty(r,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[i]=s,!e)return{error:!0};if(null===(e="string"==typeof e?document.querySelector(e):e)||0===e.length)return{error:!0};if(e.dataset.bdpinit)return t.getInstance(e);e.dataset.bdpinit=!0,y.push(this),o.put(e,"instance",this);var u=a(e,"birthdaypicker",t.defaults);this.options=n,this.settings=Object.assign({},t.defaults,u,n),this.element=e,this.settings.autoinit&&this.init()}var e,n;return e=t,n=[{key:"addEventListener",value:function(t,e,n){if(v.indexOf(t)<0||"function"!=typeof e)return!1;this.element.addEventListener(t,e,n),this.eventFired[t]&&e.call(this.element,this.eventFired[t])}},{key:"removeEventListener",value:function(t,e,n){this.element.addEventListener(t,e,n)}},{key:"_getNodeIndexByValue",value:function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(+r.value==+e)return[n,r.value]}return[void 0,void 0]}},{key:"_setYear",value:function(t){t=s(t,this._yearEnd,this._yearBegin,this._yearEnd);var e=u(this._getNodeIndexByValue(this._year.el.childNodes,t),2),n=e[0],r=e[1];this.currentYear!==r&&(this._year.el.selectedIndex=n,this._yearChanged(r))}},{key:"_setDay",value:function(t){t=s(t,1,31);var e=u(this._getNodeIndexByValue(this._day.el.childNodes,t),2),n=e[0],r=e[1];this.currentDay!==r&&(this._day.el.selectedIndex=n,this._dayChanged(r))}},{key:"_setMonth",value:function(t){t=s(t,1,12);var e=u(this._getNodeIndexByValue(this._month.el.childNodes,t),2),n=e[0],r=e[1];this.currentMonth!==r&&(this._month.el.selectedIndex=n,this._monthChanged(r))}},{key:"setDate",value:function(t,e,n){this._prevent=!0,this._setYear(t),this._setMonth(e),this._setDay(n),this._prevent=!1,this._dateChanged()}},{key:"setLanguage",value:function(e){var n=this;if(e===this.settings.locale)return!1;if(t.createLocale(e),this.monthFormat=t.i18n[e].month,"numeric"===this.settings.monthFormat)return!1;var r=this.settings.placeholder?1:0;this.monthFormat[this.settings.monthFormat].forEach((function(t,e){n._month.el.childNodes[r+e].innerHTML=t})),this.settings.locale=e,this._dateChanged()}},{key:"setMonthFormat",value:function(t){var e=this;if(!this.monthFormat[t]||t===this.settings.monthFormat)return!1;this.settings.monthFormat=t;var n=this.settings.placeholder?1:0;this.monthFormat[t].forEach((function(t,r){e._month.el.childNodes[n+r].innerHTML=e._getMonthText(t)}))}},{key:"isLeapYear",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return i(t||this.currentYear)}},{key:"getDate",value:function(t){if(!t)return new Date(Date.UTC(this.currentYear,+this.currentMonth-1,this.currentDay)).toLocaleDateString(this.settings.locale);var e=t.toLowerCase();e.replace("yyyy",this.currentYear),e.replace("mm",this.currentMonth),e.replace("dd",this.currentDay)}},{key:"_getMonthText",value:function(t){return"numeric"!==this.settings.monthFormat?t:this.settings.useLeadingZero&&+t<10?"0"+t:t}},{key:"_createBirthdayPicker",value:function(){var t,e=this;this.settings.placeholder&&this._date.forEach((function(t){var e=r("option",{value:""},"",t.name);t.df.appendChild(e)}));for(var n=this._yearBegin;n>=this._yearEnd;n--){var a=r("option",{value:n},"",n);this._year.df.append(a)}this.monthFormat[this.settings.monthFormat].forEach((function(t,n){var a=r("option",{value:n+1},"",e._getMonthText(t));e._month.df.append(a)}));for(var i=1;i<=31;i++){t=this.settings.useLeadingZero&&i<10?"0"+i:i;var o=r("option",{value:i},"",t);this._day.df.append(o)}this._date.forEach((function(t){return t.el.append(t.df)})),this.settings.defaultDate&&this.setDate(this.settings.defaultDate.year,this.settings.defaultDate.month,this.settings.defaultDate.day)}},{key:"_updateDays",value:function(t){var e=this._monthDayMapping[+t-1],n=this._day.el.children.length-(this.settings.placeholder?1:0);if(e!==n)if(e-n>0)for(var a=n;a<e;a++){var i=r("option",{value:a+1},"",""+(a+1));this._day.el.append(i)}else for(var o=n;o>e;o--)this._day.el.children[o].remove()}},{key:"_triggerEvent",value:function(t){var e,n,r,a,i={detail:{instance:this,year:this._year.el.value,month:this._month.el.value,day:this._day.el.value}},o=new CustomEvent(t,i);this.element.dispatchEvent(o),this.eventFired[t]=o,n=t,r=o,a=(e=this.element).getAttribute("on"+n),new Function("e","{"+a+"}").call(e,r)}},{key:"_nofuturDate",value:function(){var t=this;if(this.disabledReference.length&&(this.disabledReference.forEach((function(t){t.disabled=!1})),this.disabledReference=[]),+this.currentYear===_){if(this._month.el.childNodes.forEach((function(e){e.value>b&&(e.disabled=!0,t.disabledReference.push(e))})),+this.currentMonth>b){var e=u(this._getNodeIndexByValue(this._month.el.childNodes,b),2),n=e[0],r=e[1];this.currentMonth!==r&&(this._month.el.selectedIndex=n,this._monthChanged(r))}+this.currentMonth===b&&(this._day.el.childNodes.forEach((function(e){e.value>D&&(e.disabled=!0,t.disabledReference.push(e))})),+this.currentDay>=D&&this._setDay(D))}}},{key:"_dayChanged",value:function(t){this.currentDay=t}},{key:"_monthChanged",value:function(t){this.currentMonth=t,this._updateDays(t)}},{key:"_yearChanged",value:function(t){this.currentYear=t,this._monthDayMapping[1]=i(t)?29:28;var e=this._month.el.value;2==+e&&(this._updateDays(e),this._day.el.value>=29&&this._dayChanged(this._day.el.value))}},{key:"init",value:function(){if(this._monthDayMapping=[31,28,31,30,31,30,31,31,30,31,30,31],this._year={el:this.element.querySelector("["+g+"-year]"),df:document.createDocumentFragment(),name:"year"},this._month={el:this.element.querySelector("["+g+"-month]"),df:document.createDocumentFragment(),name:"month"},this._day={el:this.element.querySelector("["+g+"-day]"),df:document.createDocumentFragment(),name:"day"},this._date=[this._year,this._month,this._day],this._yearBegin=_-this.settings.minAge,this._yearEnd=_-this.settings.maxAge,this.settings.maxYear!=_&&this.settings.maxYear>_&&(this._yearBegin=this.settings.maxYear,this._yearEnd=this._yearEnd+(this.settings.maxYear-_)),this.settings.defaultDate)if("today"===this.settings.defaultDate)this.settings.defaultDate={year:_,month:b,day:D};else{var e=this.settings.defaultDate.split("-");this.settings.defaultDate={year:e[0],month:e[1],day:e[2]}}this._year.el.addEventListener("change",this._dateChanged),this._month.el.addEventListener("change",this._dateChanged),this._day.el.addEventListener("change",this._dateChanged),this.settings.locale,t.createLocale(this.settings.locale),this.monthFormat=t.i18n[this.settings.locale].month,this.disabledReference=[],this.eventFired={},this._createBirthdayPicker()}}],n&&c(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();L.i18n={},L.defaultLocale="en",L.createLocale=function(t){if(!L.i18n[t]){for(var e=new Date("2000-01-15"),n={month:{}},r=0;r<12;r++)e.setMonth(r),m.forEach((function(r){n.month[r]=n.month[r]||[],n.month[r].push(e.toLocaleDateString(t,{month:r}))}));return L.i18n[t]=n,t}},L.setMonthFormat=function(t){y.forEach((function(e){e.setMonthFormat(t)}))},L.setLanguage=function(t){L.createLocale(t),L.defaultLocale=t,y.forEach((function(e){e.setLanguage(t)}))},L.getInstance=function(t){return o.get(t,"instance")},L.defaults={maxAge:100,minAge:0,maxYear:_,monthFormat:"short",placeholder:!0,defaultDate:null,autoinit:!0,useLeadingZero:!0,locale:"de",noFutureDate:!0},f=function(){if(E)return!1;var t;E=!0,L.createLocale(L.defaultLocale),(t="["+g+"]")&&0!==(t="string"==typeof t?document.querySelectorAll(t):t).length&&(void 0===t.length&&(t=[t]),t.forEach((function(t){if(t.dataset.bdpinit)return L.getInstance(t);var e=a(t,"birthdaypicker");new L(t,e)})))},"complete"===document.readyState||"interactive"===document.readyState?(f(),document.removeEventListener("DOMContentLoaded",f)):document.addEventListener("DOMContentLoaded",f,!1);var k=L;return e.default}()}));
//# sourceMappingURL=birthdaypicker.min.js.map