/*!
* BirthdayPicker v0.1.19
* https://lemon3.github.io/birthdaypicker
*/
(function(d,l){typeof exports=="object"&&typeof module!="undefined"?module.exports=l():typeof define=="function"&&define.amd?define(l):(d=typeof globalThis!="undefined"?globalThis:d||self).BirthdayPicker=l()}(this,function(){"use strict";var A=Object.defineProperty;var w=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var b=(d,l,u)=>l in d?A(d,l,{enumerable:!0,configurable:!0,writable:!0,value:u}):d[l]=u,Y=(d,l)=>{for(var u in l||(l={}))j.call(l,u)&&b(d,u,l[u]);if(w)for(var u of w(l))O.call(l,u)&&b(d,u,l[u]);return d};var C=(d,l,u)=>(b(d,typeof l!="symbol"?l+"":l,u),u);ifconst d={en:{text:{year:"Year",month:"Month",day:"Day"}},de:{text:{year:"Jahr",month:"Monat",day:"Tag"}}},l=(s,e,t,a)=>((i,n,r,h)=>{if(n)for(const c in n)i.setAttribute(c,n[c]);if(r)for(const c in r)i.style[c]=r[c];return h&&(i.innerHTML=h),i})(document.createElement(s),e,t,a),u=s=>+s%4==0&&+s%100!=0||+s%400==0,E={_s:new WeakMap,put(s,...e){this._s.has(s)||this._s.set(s,new Map);let t=this._s.get(s);if(e.length>1)return t.set(e[0],e[1]),this;if(typeof e[0]=="object")for(const a in e[0])t.set(a,e[0][a]);else t.set(e[0]);return this},get(s,e){return!!this._s.has(s)&&(e?this._s.get(s).get(e):this._s.get(s))},has(s,e){return this._s.has(s)&&this._s.get(s).has(e)},remove(s,e){if(!this._s.has(s))return!1;let t=this._s.get(s).delete(e);return this._s.get(s).size===0&&this._s.delete(s),t}},L=(s,e,t)=>{if(s=parseFloat(s,10),isNaN(s))return NaN;if(e=parseFloat(e,10),(t=parseFloat(t,10))<e){let a=t;t=e,e=a}return!isNaN(e)&&s<e?e:!isNaN(t)&&s>t?t:s};let y=[];const N="birthdaypicker",x="data-"+N,T=["short","long","numeric"],S=["ymd","ydm","myd","mdy","dmy","dym"],m=["init","datechange","daychange","monthchange","yearchange","kill"],M="option",p=new Date,D={y:p.getFullYear(),m:p.getMonth()+1,d:p.getDate(),t:p.getTime()};let F=!1;const v=s=>s===!0||s==="true"||s===1||s==="1";class o{constructor(e,t){C(this,"_onSelect",e=>{e.target===this._year.el?this._yearWasChanged(+e.target.value):e.target===this._month.el?this._monthWasChanged(+e.target.value):e.target===this._day.el&&this._dayWasChanged(+e.target.value),this._dateChanged()});if(!e)return{error:!0};if((e=typeof e=="string"?document.querySelector(e):e)===null||e.length===0)return{error:!0};if(e.dataset.bdpInit)return o.getInstance(e);e.dataset.bdpInit=!0,y.push(this),E.put(e,"instance",this);const a=((i,n,r=null)=>{if(!i)return!1;if(n===void 0||i.dataset[n]===void 0)return i.dataset;let h;try{h=JSON.parse(i.dataset[n].replace(/'/g,'"'))}catch(g){}if(typeof h!="object"){h=i.dataset[n];const g={};h=h.replace(/ /g,"");const _=h.split(",");_.length>1?_.forEach(I=>{const[k,W]=I.split(":");g[k.replace(/'/g,"")]=W.replace(/'/g,"")}):g[n]=h,h=g}let c={},f=n.length;return Object.entries(i.dataset).forEach(g=>{if(g[0].toLowerCase().indexOf(n)>=0&&g[0].length>f){let _=g[0][f].toLowerCase()+g[0].substring(f+1);(r===null||r&&r[_]!==void 0)&&(c[_]=g[1])}}),Object.assign(h,c)})(e,N,o.defaults);this.options=t,this.settings=Object.assign({},o.defaults,a,t),this.element=e,this.settings.autoInit&&this.init()}_getIdx(e,t){if(e&&!isNaN(t||t===void 0)){for(let a,i=0;i<e.length;i++)if(a=e[i],+a.value==+t)return i}}_updateSelectBox(e,t){const a=this[e].el;a.selectedIndex=this._getIdx(a.childNodes,t)}_dateChanged(){this.settings.selectFuture||this._noFutureDate(D.y,D.m,D.d),this._triggerEvent(m[1])}_setYear(e,t=!0){return e=L(e,this._yearEnd,this._yearStart),this.currentYear!==e&&(this._updateSelectBox("_year",e),this._yearWasChanged(e),t&&this._dateChanged(),!0)}_setMonth(e,t=!0){return e=L(e,1,12),this.currentMonth!==e&&(this._updateSelectBox("_month",e),this._monthWasChanged(e),t&&this._dateChanged(),!0)}_setDay(e,t=!0){return e=L(e,1,this.getDaysPerMonth()),this.currentDay!==e&&(this._updateSelectBox("_day",e),this._dayWasChanged(e),t&&this._dateChanged(),!0)}_setDate({year:e,month:t,day:a}){this._monthChangeTriggeredLater=t!==this.currentMonth;let i=this._setYear(e,!1),n=this._setMonth(t,!1),r=this._setDay(a,!1);(i||n||r)&&this._dateChanged(),this._monthChangeTriggeredLater=!1}_parseDate(e){typeof e!="object"&&(e=e.replaceAll("-","/"));const t=Date.parse(e);if(isNaN(t))return!1;const a=new Date(t);return{year:a.getFullYear(),month:a.getMonth()+1,day:a.getDate()}}_getMonthText(e){return this.settings.monthFormat!=="numeric"?e:this.settings.leadingZero&&+e<10?"0"+e:""+e}_create(){const e=this.settings;S.indexOf(e.arrange)<0&&(e.arrange="ymd");const t={y:"year",m:"month",d:"day"};e.arrange.split("").forEach(n=>{const r=t[n];let h,c=e[r+"El"];c&&c.nodeName!==void 0?h=c:(c=c||"["+x+"-"+r+"]",h=this.element.querySelector(c)),h&&!h.dataset.init||(h=l("select"),this.element.append(h)),h.setAttribute("aria-label",`select ${r}`),e.className&&(h.classList.add(e.className),h.classList.add(`${e.className}-${r}`)),h.dataset.init=!0;const f="change",g=this._onSelect,_=!1;h.addEventListener(f,g,_),this._registeredEventListeners.push({element:h,eventName:f,listener:g,option:_}),this["_"+r]={el:h,df:document.createDocumentFragment(),name:r},this._date.push(this["_"+r])});const a=l(M,{value:""});e.placeholder&&this._date.forEach(n=>{const r=o.i18n[e.locale].text[n.name],h=a.cloneNode();h.innerHTML=r,n.df.appendChild(h)});for(let n=this._yearStart;n>=this._yearEnd;n--){const r=a.cloneNode();r.value=n,r.innerHTML=n,this._year.df.append(r)}let i;this.monthFormat[e.monthFormat].forEach((n,r)=>{const h=a.cloneNode();h.value=r+1,h.innerHTML=this._getMonthText(n),this._month.df.append(h)});for(let n=1;n<=31;n++){i=e.leadingZero&&n<10?"0"+n:n;const r=l(M,{value:n},"",i);this._day.df.append(r)}this._date.forEach(n=>n.el.append(n.df))}_updateDays(e){let t=this.getDaysPerMonth(e);const a=this.settings.placeholder?1:0,i=this._day.el.children.length-a;if(t!==i)if(t===void 0&&(t=31),t-i>0)for(let n=i;n<t;n++){let r=l(M,{value:n+1},"",""+(n+1));this._day.el.append(r)}else{for(let n=i;n>t;n--)this._day.el.children[n+a-1].remove();this.currentDay>t&&(this.settings.roundDownDay?this._setDay(t,!1):this._dayWasChanged(void 0))}}_triggerEvent(e,t){const a=Y({instance:this,year:+this._year.el.value,month:+this._month.el.value,day:+this._day.el.value,date:this.getDate()},t),i=new CustomEvent(e,{detail:a});this.element.dispatchEvent(i),this.eventFired[e]=i,((n,r,h)=>{let c=n.getAttribute("on"+r);new Function("e","{"+c+"}").call(n,h)})(this.element,e,i)}_noFutureDate(e,t,a){if(this._disabled.length&&(this._disabled.forEach(n=>{n.disabled=!1}),this._disabled=[]),this.currentYear<e||!this.currentYear||!this.currentYear&&!this.currentMonth&&!this.currentDay)return!1;this.currentYear>e&&this._setYear(e,!1),this._month.el.childNodes.forEach(n=>{n.value>t&&(n.disabled=!0,this._disabled.push(n))});const i=this.currentMonth>t;return i&&this._setMonth(t,!1),t===this.currentMonth&&(this._day.el.childNodes.forEach(n=>{n.value>a&&(n.disabled=!0,this._disabled.push(n))}),(i||this.currentDay>a)&&this._setDay(a,!1)),!0}_dayWasChanged(e){this.currentDay=e,this._triggerEvent(m[2])}_monthWasChanged(e){this.currentMonth=e,this._triggerEvent(m[3]),this._updateDays(e)}_yearWasChanged(e){this.currentYear=e,this._daysPerMonth[1]=u(e)?29:28,this._triggerEvent(m[4]),this._monthChangeTriggeredLater||this.currentMonth!==2||this._updateDays(this.currentMonth)}useLeadingZero(e){(e=v(e))!==this.settings.leadingZero&&(this.settings.leadingZero=e,this.settings.monthFormat==="numeric"&&this._updateMonthList(),this._updateDayList())}_updateDayList(){const e=this.settings.placeholder?1:0;for(let t=0;t<9;t++)this._day.el.childNodes[t+e].innerHTML=(this.settings.leadingZero?"0":"")+(t+1)}_updateMonthList(){const e=this.settings.monthFormat,t=this.settings.placeholder?1:0;this.monthFormat[e].forEach((a,i)=>{this._month.el.childNodes[i+t].innerHTML=this._getMonthText(a)})}getDaysPerMonth(e=this.currentMonth){return this._daysPerMonth[+e-1]}setMonthFormat(e){return!!this.monthFormat[e]&&(e!==this.settings.monthFormat&&(this.settings.monthFormat=e,this._updateMonthList()),!0)}setLanguage(e){if(e===this.settings.locale||(""+e).length<2||(""+e).length>2)return!1;o.createLocale(e);const t=o.i18n[e];if(this.settings.placeholder&&this._date.forEach(i=>{i.el.childNodes[0].innerHTML=t.text[i.name]}),this.monthFormat=t.month,this.settings.locale=e,this.settings.monthFormat==="numeric")return!1;let a=this.settings.placeholder?1:0;this.monthFormat[this.settings.monthFormat].forEach((i,n)=>{this._month.el.childNodes[a+n].innerHTML=i}),this._triggerEvent(m[1])}setDate(e){let t=this._parseDate(e);return t&&this._setDate(t),t}resetDate(e=!1){let t=this.startDate&&e?this.startDate:{year:void 0,month:void 0,day:void 0};this._setDate(t)}addEventListener(e,t,a){if(m.indexOf(e)<0||typeof t!="function")return!1;this.element.addEventListener(e,t,a),this._registeredEventListeners.push({element:this.element,eventName:e,listener:t,option:a}),this.eventFired[e]&&t.call(this.element,this.eventFired[e])}removeEventListener(e,t,a){this.element.removeEventListener(e,t,a)}kill(){if(this.eventFired={},this._registeredEventListeners&&this._registeredEventListeners.forEach(e=>e.element.removeEventListener(e.eventName,e.listener,e.option)),this.settings.className){const e=this.settings.className;["year","month","day"].forEach(t=>{const a=e+"-"+t,i=this.element.querySelector("."+a);i&&(i.classList.remove(e),i.classList.remove(a))})}this._triggerEvent(m[5])}isLeapYear(e=this.currentYear){return e===void 0?void 0:u(e)}getDateString(e){if(!e){const a=this.getDate();return a&&a.toLocaleDateString(this.settings.locale)}if(!this.currentYear||!this.currentMonth||!this.currentDay)return"";let t=e.toLowerCase();return t=t.replace(/yyyy/g,this.currentYear),t=t.replace(/yy/g,(""+this.currentYear).slice(2)),t=t.replace(/mm/g,("0"+this.currentMonth).slice(-2)),t=t.replace(/m/g,this.currentMonth),t=t.replace(/dd/g,("0"+this.currentDay).slice(-2)),t=t.replace(/d/g,this.currentDay),t}getDate(){return this.currentYear&&this.currentMonth&&this.currentDay?new Date(Date.UTC(this.currentYear,+this.currentMonth-1,this.currentDay)):""}init(){if(this.initialized)return!0;this.initialized=!0,this.eventFired={},this._registeredEventListeners=[],this._daysPerMonth=[31,28,31,30,31,30,31,31,30,31,30,31],this._date=[],this._disabled=[];const e=this.settings;if(e.placeholder=v(e.placeholder),e.leadingZero=v(e.leadingZero),e.selectFuture=v(e.selectFuture),e.maxYear==="now"?this._yearStart=D.y:this._yearStart=e.maxYear,this._yearStart-=+e.minAge,e.minYear?this._yearEnd=+e.minYear:this._yearEnd=this._yearStart-+e.maxAge,o.createLocale(e.locale),this.monthFormat=o.i18n[e.locale].month,this._create(),this._triggerEvent(m[0]),e.defaultDate){const t=this.setDate(e.defaultDate==="now"?new Date().toString():e.defaultDate);this.currentYear=t.year,this.currentMonth=t.month,this.currentDay=t.day,this.startDate=t}}}return o.i18n={},o.currentLocale="en",o.getInstance=s=>E.get(s,"instance"),o.createLocale=s=>{if(s&&s.length===2||(s="en"),o.i18n[s])return o.i18n[s];let e=new Date("2000-01-15"),t={month:{}};for(let n=0;n<12;n++)e.setMonth(n),T.forEach(r=>{t.month[r]=t.month[r]||[],t.month[r].push(e.toLocaleDateString(s,{month:r}))});const a="BirthdayPickerLocale";let i=d[s]?d[s]:d.en;return window[a]&&window[a][s]&&window[a][s].text&&(i=Object.assign({},i,window[a][s])),t.text=i.text,o.i18n[s]=t,t},o.setMonthFormat=s=>{y.forEach(e=>{e.setMonthFormat(s)})},o.setLanguage=s=>{o.currentLocale=s,y.forEach(e=>{e.setLanguage(s)})},o.killAll=()=>!!y.length&&(y.forEach(s=>{o.kill(s)}),y=[],!0),o.kill=s=>{if(!s||(s.element||(s=o.getInstance(s)),!s))return!1;s.kill();const e=s.element;return e.dataset.bdpInit=!1,delete e.dataset.bdpInit,E.remove(e,"instance"),F=!1,!0},o.defaults={minYear:null,maxYear:"now",minAge:0,maxAge:100,monthFormat:"short",placeholder:!0,className:null,defaultDate:null,autoInit:!0,leadingZero:!0,locale:"en",selectFuture:!1,arrange:"ymd",yearEl:null,monthEl:null,dayEl:null,roundDownDay:!0},o.init=()=>{if(F)return!1;F=!0,o.createLocale(o.currentLocale);let s=document.querySelectorAll("["+x+"]");return s.length!==0&&(s.forEach(e=>{new o(e)}),y)},o}),globalThis.getDomData)for(const d of Object.keys(globalThis.getDomData))globalThis[d]=globalThis.getDomData[d];
