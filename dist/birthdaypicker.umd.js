/*!
* BirthdayPicker v0.1.19
* https://lemon3.github.io/birthdaypicker
*/
(function(d,l){typeof exports=="object"&&typeof module!="undefined"?module.exports=l():typeof define=="function"&&define.amd?define(l):(d=typeof globalThis!="undefined"?globalThis:d||self,d.BirthdayPicker=l())})(this,function(){"use strict";var O=Object.defineProperty;var T=Object.getOwnPropertySymbols;var Z=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var w=(d,l,c)=>l in d?O(d,l,{enumerable:!0,configurable:!0,writable:!0,value:c}):d[l]=c,S=(d,l)=>{for(var c in l||(l={}))Z.call(l,c)&&w(d,c,l[c]);if(T)for(var c of T(l))H.call(l,c)&&w(d,c,l[c]);return d};var x=(d,l,c)=>(w(d,typeof l!="symbol"?l+"":l,c),c);const d={minYear:null,maxYear:"now",minAge:0,maxAge:100,monthFormat:"short",placeholder:!0,className:null,defaultDate:null,autoInit:!0,leadingZero:!0,locale:"en",selectFuture:!1,arrange:"ymd",yearEl:null,monthEl:null,dayEl:null,roundDownDay:!0},l={en:{text:{year:"Year",month:"Month",day:"Day"}},de:{text:{year:"Jahr",month:"Monat",day:"Tag"}}},c=(s,t,e)=>{let n=s.getAttribute("on"+t);new Function("e","{"+n+"}").call(s,e)},I=(s,t,e,n)=>{if(t)for(const r in t)s.setAttribute(r,t[r]);if(e)for(const r in e)s.style[r]=e[r];return n&&(s.innerHTML=n),s},_=(s,t,e,n)=>I(document.createElement(s),t,e,n),j=(s,t,e=null)=>{if(!s)return!1;if(t===void 0||s.dataset[t]===void 0)return s.dataset;let n;try{n=JSON.parse(s.dataset[t].replace(/'/g,'"'))}catch(a){}if(typeof n!="object"){n=s.dataset[t];const a={};n=n.replace(/ /g,"");const o=n.split(",");o.length>1?o.forEach(u=>{const[D,E]=u.split(":");a[D.replace(/'/g,"")]=E.replace(/'/g,"")}):a[t]=n,n=a}let r={},i=t.length;return Object.entries(s.dataset).forEach(a=>{if(a[0].toLowerCase().indexOf(t)>=0&&a[0].length>i){let o=a[0][i].toLowerCase()+a[0].substring(i+1);(e===null||e&&e[o]!==void 0)&&(r[o]=a[1])}}),Object.assign(n,r)},N=s=>+s%4===0&&+s%100!==0||+s%400===0,M={_s:new WeakMap,put(s,...t){this._s.has(s)||this._s.set(s,new Map);let e=this._s.get(s);if(t.length>1)return e.set(t[0],t[1]),this;if(typeof t[0]=="object")for(const n in t[0])e.set(n,t[0][n]);else e.set(t[0]);return this},get(s,t){return this._s.has(s)?t?this._s.get(s).get(t):this._s.get(s):!1},has(s,t){return this._s.has(s)&&this._s.get(s).has(t)},remove(s,t){if(!this._s.has(s))return!1;let e=this._s.get(s).delete(t);return this._s.get(s).size===0&&this._s.delete(s),e}},L=(s,t,e)=>{if(s=parseFloat(s,10),isNaN(s))return NaN;if(t=parseFloat(t,10),e=parseFloat(e,10),e<t){let n=e;e=t,t=n}return!isNaN(t)&&s<t?t:!isNaN(e)&&s>e?e:s};let g=[];const v="birthdaypicker",C="data-"+v,A=["short","long","numeric"],W=["ymd","ydm","myd","mdy","dmy","dym"],f=["init","datechange","daychange","monthchange","yearchange","kill"],F="option",p=new Date,m={y:p.getFullYear(),m:p.getMonth()+1,d:p.getDate(),t:p.getTime()};let b=!1;const y=s=>s===!0||s==="true"||s===1||s==="1";class h{constructor(t,e){x(this,"_onSelect",t=>{t.target===this._year.el?this._yearWasChanged(+t.target.value):t.target===this._month.el?this._monthWasChanged(+t.target.value):t.target===this._day.el&&this._dayWasChanged(+t.target.value),this._dateChanged()});if(!t)return{error:!0};if(t=typeof t=="string"?document.querySelector(t):t,t===null||t.length===0)return{error:!0};if(t.dataset.bdpInit)return h.getInstance(t);t.dataset.bdpInit=!0,g.push(this),M.put(t,"instance",this);const n=j(t,v,h.defaults);this.options=e,this.settings=Object.assign({},h.defaults,n,e),this.element=t,this.settings.autoInit&&this.init()}_getIdx(t,e){if(!(!t||isNaN(e||typeof e=="undefined"))){for(let n=0,r;n<t.length;n++)if(r=t[n],+r.value==+e)return n}}_updateSelectBox(t,e){const n=this[t].el;n.selectedIndex=this._getIdx(n.childNodes,e)}_dateChanged(){this.settings.selectFuture||this._noFutureDate(m.y,m.m,m.d),this._triggerEvent(f[1])}_setYear(t,e=!0){return t=L(t,this._yearEnd,this._yearStart),this.currentYear===t?!1:(this._updateSelectBox("_year",t),this._yearWasChanged(t),e&&this._dateChanged(),!0)}_setMonth(t,e=!0){return t=L(t,1,12),this.currentMonth===t?!1:(this._updateSelectBox("_month",t),this._monthWasChanged(t),e&&this._dateChanged(),!0)}_setDay(t,e=!0){return t=L(t,1,this.getDaysPerMonth()),this.currentDay===t?!1:(this._updateSelectBox("_day",t),this._dayWasChanged(t),e&&this._dateChanged(),!0)}_setDate({year:t,month:e,day:n}){this._monthChangeTriggeredLater=e!==this.currentMonth;let r=this._setYear(t,!1),i=this._setMonth(e,!1),a=this._setDay(n,!1);(r||i||a)&&this._dateChanged(),this._monthChangeTriggeredLater=!1}_parseDate(t){typeof t!="object"&&(t=t.replaceAll("-","/"));const e=Date.parse(t);if(isNaN(e))return!1;const n=new Date(e),r=n.getFullYear(),i=n.getMonth()+1,a=n.getDate();return{year:r,month:i,day:a}}_getMonthText(t){return this.settings.monthFormat!=="numeric"?t:this.settings.leadingZero&&+t<10?"0"+t:""+t}_create(){const t=this.settings;W.indexOf(t.arrange)<0&&(t.arrange="ymd");const e={y:"year",m:"month",d:"day"};t.arrange.split("").forEach(i=>{const a=e[i];let o,u=t[a+"El"];u&&typeof u.nodeName!="undefined"?o=u:(u=u||"["+C+"-"+a+"]",o=this.element.querySelector(u)),(!o||o.dataset.init)&&(o=_("select"),this.element.append(o)),o.setAttribute("aria-label",`select ${a}`),t.className&&(o.classList.add(t.className),o.classList.add(`${t.className}-${a}`)),o.dataset.init=!0;const D="change",E=this._onSelect,Y=!1;o.addEventListener(D,E,Y),this._registeredEventListeners.push({element:o,eventName:D,listener:E,option:Y}),this["_"+a]={el:o,df:document.createDocumentFragment(),name:a},this._date.push(this["_"+a])});const n=_(F,{value:""});t.placeholder&&this._date.forEach(i=>{const a=h.i18n[t.locale].text[i.name],o=n.cloneNode();o.innerHTML=a,i.df.appendChild(o)});for(let i=this._yearStart;i>=this._yearEnd;i--){const a=n.cloneNode();a.value=i,a.innerHTML=i,this._year.df.append(a)}this.monthFormat[t.monthFormat].forEach((i,a)=>{const o=n.cloneNode();o.value=a+1,o.innerHTML=this._getMonthText(i),this._month.df.append(o)});let r;for(let i=1;i<=31;i++){r=t.leadingZero&&i<10?"0"+i:i;const a=_(F,{value:i},"",r);this._day.df.append(a)}this._date.forEach(i=>i.el.append(i.df))}_updateDays(t){let e=this.getDaysPerMonth(t);const n=this.settings.placeholder?1:0,r=this._day.el.children.length-n;if(e!==r)if(typeof e=="undefined"&&(e=31),e-r>0)for(let i=r;i<e;i++){let a=_(F,{value:i+1},"",""+(i+1));this._day.el.append(a)}else{for(let i=r;i>e;i--)this._day.el.children[i+n-1].remove();this.currentDay>e&&(this.settings.roundDownDay?this._setDay(e,!1):this._dayWasChanged(void 0))}}_triggerEvent(t,e){const r={detail:S({instance:this,year:+this._year.el.value,month:+this._month.el.value,day:+this._day.el.value,date:this.getDate()},e)},i=new CustomEvent(t,r);this.element.dispatchEvent(i),this.eventFired[t]=i,c(this.element,t,i)}_noFutureDate(t,e,n){if(this._disabled.length&&(this._disabled.forEach(i=>{i.disabled=!1}),this._disabled=[]),this.currentYear<t||!this.currentYear||!this.currentYear&&!this.currentMonth&&!this.currentDay)return!1;this.currentYear>t&&this._setYear(t,!1),this._month.el.childNodes.forEach(i=>{i.value>e&&(i.disabled=!0,this._disabled.push(i))});const r=this.currentMonth>e;return r&&this._setMonth(e,!1),e===this.currentMonth&&(this._day.el.childNodes.forEach(i=>{i.value>n&&(i.disabled=!0,this._disabled.push(i))}),(r||this.currentDay>n)&&this._setDay(n,!1)),!0}_dayWasChanged(t){this.currentDay=t,this._triggerEvent(f[2])}_monthWasChanged(t){this.currentMonth=t,this._triggerEvent(f[3]),this._updateDays(t)}_yearWasChanged(t){this.currentYear=t,this._daysPerMonth[1]=N(t)?29:28,this._triggerEvent(f[4]),!this._monthChangeTriggeredLater&&this.currentMonth===2&&this._updateDays(this.currentMonth)}useLeadingZero(t){t=y(t),t!==this.settings.leadingZero&&(this.settings.leadingZero=t,this.settings.monthFormat==="numeric"&&this._updateMonthList(),this._updateDayList())}_updateDayList(){const t=this.settings.placeholder?1:0;for(let e=0;e<9;e++){const n=this._day.el.childNodes[e+t];n.innerHTML=(this.settings.leadingZero?"0":"")+(e+1)}}_updateMonthList(){const t=this.settings.monthFormat,e=this.settings.placeholder?1:0;this.monthFormat[t].forEach((n,r)=>{this._month.el.childNodes[r+e].innerHTML=this._getMonthText(n)})}getDaysPerMonth(t=this.currentMonth){return this._daysPerMonth[+t-1]}setMonthFormat(t){return this.monthFormat[t]?(t!==this.settings.monthFormat&&(this.settings.monthFormat=t,this._updateMonthList()),!0):!1}setLanguage(t){if(t===this.settings.locale||(""+t).length<2||(""+t).length>2)return!1;h.createLocale(t);const e=h.i18n[t];if(this.settings.placeholder&&this._date.forEach(r=>{r.el.childNodes[0].innerHTML=e.text[r.name]}),this.monthFormat=e.month,this.settings.locale=t,this.settings.monthFormat==="numeric")return!1;let n=this.settings.placeholder?1:0;this.monthFormat[this.settings.monthFormat].forEach((r,i)=>{this._month.el.childNodes[n+i].innerHTML=r}),this._triggerEvent(f[1])}setDate(t){let e=this._parseDate(t);return e&&this._setDate(e),e}resetDate(t=!1){let e=this.startDate&&t?this.startDate:{year:void 0,month:void 0,day:void 0};this._setDate(e)}addEventListener(t,e,n){if(f.indexOf(t)<0||typeof e!="function")return!1;this.element.addEventListener(t,e,n),this._registeredEventListeners.push({element:this.element,eventName:t,listener:e,option:n}),this.eventFired[t]&&e.call(this.element,this.eventFired[t])}removeEventListener(t,e,n){this.element.removeEventListener(t,e,n)}kill(){if(this.eventFired={},this._registeredEventListeners&&this._registeredEventListeners.forEach(t=>t.element.removeEventListener(t.eventName,t.listener,t.option)),this.settings.className){const t=this.settings.className;["year","month","day"].forEach(e=>{const n=t+"-"+e,r=this.element.querySelector("."+n);r&&(r.classList.remove(t),r.classList.remove(n))})}this._triggerEvent(f[5])}isLeapYear(t=this.currentYear){return t===void 0?void 0:N(t)}getDateString(t){if(!t){const n=this.getDate();return n&&n.toLocaleDateString(this.settings.locale)}if(!this.currentYear||!this.currentMonth||!this.currentDay)return"";let e=t.toLowerCase();return e=e.replace(/yyyy/g,this.currentYear),e=e.replace(/yy/g,(""+this.currentYear).slice(2)),e=e.replace(/mm/g,("0"+this.currentMonth).slice(-2)),e=e.replace(/m/g,this.currentMonth),e=e.replace(/dd/g,("0"+this.currentDay).slice(-2)),e=e.replace(/d/g,this.currentDay),e}getDate(){return!this.currentYear||!this.currentMonth||!this.currentDay?"":new Date(Date.UTC(this.currentYear,+this.currentMonth-1,this.currentDay))}init(){if(this.initialized)return!0;this.initialized=!0,this.eventFired={},this._registeredEventListeners=[],this._daysPerMonth=[31,28,31,30,31,30,31,31,30,31,30,31],this._date=[],this._disabled=[];const t=this.settings;if(t.placeholder=y(t.placeholder),t.leadingZero=y(t.leadingZero),t.selectFuture=y(t.selectFuture),t.maxYear==="now"?this._yearStart=m.y:this._yearStart=t.maxYear,this._yearStart-=+t.minAge,t.minYear?this._yearEnd=+t.minYear:this._yearEnd=this._yearStart-+t.maxAge,h.createLocale(t.locale),this.monthFormat=h.i18n[t.locale].month,this._create(),this._triggerEvent(f[0]),t.defaultDate){const e=this.setDate(t.defaultDate==="now"?new Date().toString():t.defaultDate);this.currentYear=e.year,this.currentMonth=e.month,this.currentDay=e.day,this.startDate=e}}}return h.i18n={},h.currentLocale="en",h.getInstance=s=>M.get(s,"instance"),h.createLocale=s=>{if((!s||s.length!==2)&&(s="en"),h.i18n[s])return h.i18n[s];let t=new Date("2000-01-15"),e={month:{}};for(let i=0;i<12;i++)t.setMonth(i),A.forEach(a=>{e.month[a]=e.month[a]||[],e.month[a].push(t.toLocaleDateString(s,{month:a}))});const n="BirthdayPickerLocale";let r=l[s]?l[s]:l.en;return window[n]&&window[n][s]&&window[n][s].text&&(r=Object.assign({},r,window[n][s])),e.text=r.text,h.i18n[s]=e,e},h.setMonthFormat=s=>{g.forEach(t=>{t.setMonthFormat(s)})},h.setLanguage=s=>{h.currentLocale=s,g.forEach(t=>{t.setLanguage(s)})},h.killAll=()=>g.length?(g.forEach(s=>{h.kill(s)}),g=[],!0):!1,h.kill=s=>{if(!s||(s.element||(s=h.getInstance(s)),!s))return!1;s.kill();const t=s.element;return t.dataset.bdpInit=!1,delete t.dataset.bdpInit,M.remove(t,"instance"),b=!1,!0},h.defaults=d,h.init=()=>{if(b)return!1;b=!0,h.createLocale(h.currentLocale);let s=document.querySelectorAll("["+C+"]");return s.length===0?!1:(s.forEach(t=>{new h(t)}),g)},h});if(globalThis.getDomData)for(const d of Object.keys(globalThis.getDomData))globalThis[d]=globalThis.getDomData[d];
