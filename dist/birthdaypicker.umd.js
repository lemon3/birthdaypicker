/*!
* BirthdayPicker v0.1.19
* https://lemon3.github.io/birthdaypicker
*/
(function(d,l){typeof exports=="object"&&typeof module!="undefined"?module.exports=l():typeof define=="function"&&define.amd?define(l):(d=typeof globalThis!="undefined"?globalThis:d||self).BirthdayPicker=l()}(this,function(){"use strict";var W=Object.defineProperty;var C=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var b=(d,l,u)=>l in d?W(d,l,{enumerable:!0,configurable:!0,writable:!0,value:u}):d[l]=u,w=(d,l)=>{for(var u in l||(l={}))j.call(l,u)&&b(d,u,l[u]);if(C)for(var u of C(l))O.call(l,u)&&b(d,u,l[u]);return d};var T=(d,l,u)=>(b(d,typeof l!="symbol"?l+"":l,u),u);ifconst d={en:{year:"Year",month:"Month",day:"Day"},de:{year:"Jahr",month:"Monat",day:"Tag"},fr:{year:"AnnÃ©e",month:"Mois",day:"Jour"}},l=(s,e,t,a)=>((r,n,i,h)=>{if(n)for(const c in n)r.setAttribute(c,n[c]);if(i)for(const c in i)r.style[c]=i[c];return h&&(r.innerHTML=h),r})(document.createElement(s),e,t,a),u=s=>+s%4==0&&+s%100!=0||+s%400==0,E={_s:new WeakMap,put(s,...e){this._s.has(s)||this._s.set(s,new Map);let t=this._s.get(s);if(e.length>1)return t.set(e[0],e[1]),this;if(typeof e[0]=="object")for(const a in e[0])t.set(a,e[0][a]);else t.set(e[0]);return this},get(s,e){return!!this._s.has(s)&&(e?this._s.get(s).get(e):this._s.get(s))},has(s,e){return this._s.has(s)&&this._s.get(s).has(e)},remove(s,e){if(!this._s.has(s))return!1;let t=this._s.get(s).delete(e);return this._s.get(s).size===0&&this._s.delete(s),t}},L=(s,e,t)=>{if(s=parseFloat(s,10),isNaN(s))return NaN;if(e=parseFloat(e,10),(t=parseFloat(t,10))<e){let a=t;t=e,e=a}return!isNaN(e)&&s<e?e:!isNaN(t)&&s>t?t:s};let y=[];const N="birthdaypicker",Y="data-"+N,S=["short","long","numeric"],x=["ymd","ydm","myd","mdy","dmy","dym"],m=["init","datechange","daychange","monthchange","yearchange","kill"],M="option",p=new Date,D={y:p.getFullYear(),m:p.getMonth()+1,d:p.getDate(),t:p.getTime()};let F=!1;const v=s=>s===!0||s==="true"||s===1||s==="1";class o{constructor(e,t){T(this,"_onSelect",e=>{e.target===this._year.el?this._yearWasChanged(+e.target.value):e.target===this._month.el?this._monthWasChanged(+e.target.value):e.target===this._day.el&&this._dayWasChanged(+e.target.value),this._dateChanged()});if(!e)return{error:!0};if((e=typeof e=="string"?document.querySelector(e):e)===null||e.length===0)return{error:!0};if(e.dataset.bdpInit)return o.getInstance(e);e.dataset.bdpInit=!0,y.push(this),E.put(e,"instance",this);const a=((r,n,i=null)=>{if(!r)return!1;if(n===void 0||r.dataset[n]===void 0)return r.dataset;let h;try{h=JSON.parse(r.dataset[n].replace(/'/g,'"'))}catch(g){}if(typeof h!="object"){h=r.dataset[n];const g={};h=h.replace(/ /g,"");const _=h.split(",");_.length>1?_.forEach(I=>{const[k,A]=I.split(":");g[k.replace(/'/g,"")]=A.replace(/'/g,"")}):g[n]=h,h=g}let c={},f=n.length;return Object.entries(r.dataset).forEach(g=>{if(g[0].toLowerCase().indexOf(n)>=0&&g[0].length>f){let _=g[0][f].toLowerCase()+g[0].substring(f+1);(i===null||i&&i[_]!==void 0)&&(c[_]=g[1])}}),Object.assign(h,c)})(e,N,o.defaults);this.options=t,this.settings=Object.assign({},o.defaults,a,t),this.element=e,this.settings.autoInit&&this.init()}_parseDate(e){typeof e!="object"&&(e=e.replaceAll("-","/"));const t=Date.parse(e);return isNaN(t)?!1:{year:(e=new Date(t)).getFullYear(),month:e.getMonth()+1,day:e.getDate()}}_getIdx(e,t){if(e&&!isNaN(t||t===void 0)){for(let a,r=0;r<e.length;r++)if(a=e[r],+a.value==+t)return r}}_updateSelectBox(e,t){const a=this[e].el;a.selectedIndex=this._getIdx(a.childNodes,t)}_dateChanged(){this.settings.selectFuture||this._noFutureDate(D.y,D.m,D.d),this._triggerEvent(m[1])}_setYear(e,t=!0){return e=L(e,this._yearEnd,this._yearStart),this.currentYear!==e&&(this._updateSelectBox("_year",e),this._yearWasChanged(e),t&&this._dateChanged(),!0)}_setMonth(e,t=!0){return e=L(e,1,12),this.currentMonth!==e&&(this._updateSelectBox("_month",e),this._monthWasChanged(e),t&&this._dateChanged(),!0)}_setDay(e,t=!0){return e=L(e,1,this.getDaysPerMonth()),this.currentDay!==e&&(this._updateSelectBox("_day",e),this._dayWasChanged(e),t&&this._dateChanged(),!0)}_setDate({year:e,month:t,day:a}){this._monthChangeTriggeredLater=t!==this.currentMonth;let r=this._setYear(e,!1),n=this._setMonth(t,!1),i=this._setDay(a,!1);(r||n||i)&&this._dateChanged(),this._monthChangeTriggeredLater=!1}_getMonthText(e){return this.settings.monthFormat!=="numeric"?e:this.settings.leadingZero&&+e<10?"0"+e:""+e}_create(){const e=this.settings;x.indexOf(e.arrange)<0&&(e.arrange="ymd");const t={y:"year",m:"month",d:"day"};e.arrange.split("").forEach(n=>{const i=t[n];let h,c=e[i+"El"];c&&c.nodeName!==void 0?h=c:(c=c||"["+Y+"-"+i+"]",h=this.element.querySelector(c)),h&&!h.dataset.init||(h=l("select"),this.element.append(h)),h.setAttribute("aria-label",`select ${i}`),e.className&&(h.classList.add(e.className),h.classList.add(`${e.className}-${i}`)),h.dataset.init=!0;const f="change",g=this._onSelect,_=!1;h.addEventListener(f,g,_),this._registeredEventListeners.push({element:h,eventName:f,listener:g,option:_}),this["_"+i]={el:h,df:document.createDocumentFragment(),name:i},this._date.push(this["_"+i])});const a=l(M,{value:""});e.placeholder&&this._date.forEach(n=>{const i=o.i18n[e.locale][n.name],h=a.cloneNode();h.innerHTML=i,n.df.appendChild(h)});for(let n=this._yearStart;n>=this._yearEnd;n--){const i=a.cloneNode();i.value=n,i.innerHTML=n,this._year.df.append(i)}let r;this.monthFormat[e.monthFormat].forEach((n,i)=>{const h=a.cloneNode();h.value=i+1,h.innerHTML=this._getMonthText(n),this._month.df.append(h)});for(let n=1;n<=31;n++){r=e.leadingZero&&n<10?"0"+n:n;const i=l(M,{value:n},"",r);this._day.df.append(i)}this._date.forEach(n=>n.el.append(n.df))}_updateDays(e){let t=this.getDaysPerMonth(e);const a=this.settings.placeholder?1:0,r=this._day.el.children.length-a;if(t!==r)if(t===void 0&&(t=31),t-r>0)for(let n=r;n<t;n++){let i=l(M,{value:n+1},"",""+(n+1));this._day.el.append(i)}else{for(let n=r;n>t;n--)this._day.el.children[n+a-1].remove();this.currentDay>t&&(this.settings.roundDownDay?this._setDay(t,!1):this._dayWasChanged(void 0))}}_triggerEvent(e,t){const a=w({instance:this,year:+this._year.el.value,month:+this._month.el.value,day:+this._day.el.value,date:this.getDate()},t),r=new CustomEvent(e,{detail:a});this.element.dispatchEvent(r),this.eventFired[e]=r,((n,i,h)=>{let c=n.getAttribute("on"+i);new Function("e","{"+c+"}").call(n,h)})(this.element,e,r)}_noFutureDate(e,t,a){if(this._disabled.length&&(this._disabled.forEach(n=>{n.disabled=!1}),this._disabled=[]),this.currentYear<e||!this.currentYear||!this.currentYear&&!this.currentMonth&&!this.currentDay)return!1;this.currentYear>e&&this._setYear(e,!1),this._month.el.childNodes.forEach(n=>{n.value>t&&(n.disabled=!0,this._disabled.push(n))});const r=this.currentMonth>t;return r&&this._setMonth(t,!1),t===this.currentMonth&&(this._day.el.childNodes.forEach(n=>{n.value>a&&(n.disabled=!0,this._disabled.push(n))}),(r||this.currentDay>a)&&this._setDay(a,!1)),!0}_dayWasChanged(e){this.currentDay=e,this._triggerEvent(m[2])}_monthWasChanged(e){this.currentMonth=e,this._triggerEvent(m[3]),this._updateDays(e)}_yearWasChanged(e){this.currentYear=e,this._daysPerMonth[1]=u(e)?29:28,this._triggerEvent(m[4]),this._monthChangeTriggeredLater||this.currentMonth!==2||this._updateDays(this.currentMonth)}_updateDayList(){const e=this.settings.placeholder?1:0;for(let t=0;t<9;t++)this._day.el.childNodes[t+e].innerHTML=(this.settings.leadingZero?"0":"")+(t+1)}_updateMonthList(){const e=this.settings.monthFormat,t=this.settings.placeholder?1:0;this.monthFormat[e].forEach((a,r)=>{this._month.el.childNodes[r+t].innerHTML=this._getMonthText(a)})}useLeadingZero(e){(e=v(e))!==this.settings.leadingZero&&(this.settings.leadingZero=e,this.settings.monthFormat==="numeric"&&this._updateMonthList(),this._updateDayList())}getDaysPerMonth(e=this.currentMonth){return this._daysPerMonth[+e-1]}setMonthFormat(e){return!!this.monthFormat[e]&&(e!==this.settings.monthFormat&&(this.settings.monthFormat=e,this._updateMonthList()),!0)}setLanguage(e){if(e===this.settings.locale||(""+e).length<2||(""+e).length>2)return!1;o.createLocale(e);const t=o.i18n[e];if(this.settings.placeholder&&this._date.forEach(r=>{r.el.childNodes[0].innerHTML=t[r.name]}),this.monthFormat=t.monthFormat,this.settings.locale=e,this.settings.monthFormat==="numeric")return!1;let a=this.settings.placeholder?1:0;this.monthFormat[this.settings.monthFormat].forEach((r,n)=>{this._month.el.childNodes[a+n].innerHTML=r}),this._triggerEvent(m[1])}setDate(e){let t=this._parseDate(e);return t&&this._setDate(t),t}resetDate(e=!1){let t=this.startDate&&e?this.startDate:{year:void 0,month:void 0,day:void 0};this._setDate(t)}addEventListener(e,t,a){if(m.indexOf(e)<0||typeof t!="function")return!1;this.element.addEventListener(e,t,a),this._registeredEventListeners.push({element:this.element,eventName:e,listener:t,option:a}),this.eventFired[e]&&t.call(this.element,this.eventFired[e])}removeEventListener(e,t,a){this.element.removeEventListener(e,t,a)}kill(){if(this.eventFired={},this._registeredEventListeners&&this._registeredEventListeners.forEach(e=>e.element.removeEventListener(e.eventName,e.listener,e.option)),this.settings.className){const e=this.settings.className;["year","month","day"].forEach(t=>{const a=e+"-"+t,r=this.element.querySelector("."+a);r&&(r.classList.remove(e),r.classList.remove(a))})}this._triggerEvent(m[5])}isLeapYear(e=this.currentYear){return e===void 0?void 0:u(e)}getDateString(e){if(!e){const a=this.getDate();return a&&a.toLocaleDateString(this.settings.locale)}if(!this.currentYear||!this.currentMonth||!this.currentDay)return"";let t=e.toLowerCase();return t=t.replace(/yyyy/g,this.currentYear),t=t.replace(/yy/g,(""+this.currentYear).slice(2)),t=t.replace(/mm/g,("0"+this.currentMonth).slice(-2)),t=t.replace(/m/g,this.currentMonth),t=t.replace(/dd/g,("0"+this.currentDay).slice(-2)),t=t.replace(/d/g,this.currentDay),t}getDate(){return this.currentYear&&this.currentMonth&&this.currentDay?new Date(Date.UTC(this.currentYear,+this.currentMonth-1,this.currentDay)):""}init(){if(this.initialized)return!0;this.initialized=!0,this.eventFired={},this._registeredEventListeners=[],this._daysPerMonth=[31,28,31,30,31,30,31,31,30,31,30,31],this._date=[],this._disabled=[];const e=this.settings;if(e.placeholder=v(e.placeholder),e.leadingZero=v(e.leadingZero),e.selectFuture=v(e.selectFuture),e.maxYear==="now"?this._yearStart=D.y:this._yearStart=e.maxYear,this._yearStart-=+e.minAge,e.minYear?this._yearEnd=+e.minYear:this._yearEnd=this._yearStart-+e.maxAge,o.createLocale(e.locale),this.monthFormat=o.i18n[e.locale].monthFormat,this._create(),this._triggerEvent(m[0]),e.defaultDate){const t=this.setDate(e.defaultDate==="now"?new Date().toString():e.defaultDate);this.currentYear=t.year,this.currentMonth=t.month,this.currentDay=t.day,this.startDate=t}}}return o.i18n={},o.currentLocale="en",o.getInstance=s=>E.get(s,"instance"),o.createLocale=s=>{if(s&&s.length===2||(s="en"),o.i18n[s])return o.i18n[s];let e=new Date("2000-01-15"),t={monthFormat:{}};for(let n=0;n<12;n++)e.setMonth(n),S.forEach(i=>{t.monthFormat[i]=t.monthFormat[i]||[],t.monthFormat[i].push(e.toLocaleDateString(s,{month:i}))});const a="BirthdayPickerLocale";let r=d[s]?d[s]:d.en;return window[a]&&window[a][s]&&(r=Object.assign({},r,window[a][s])),o.i18n[s]=Object.assign(t,r),t},o.setMonthFormat=s=>{y.forEach(e=>{e.setMonthFormat(s)})},o.setLanguage=s=>{o.currentLocale=s,y.forEach(e=>{e.setLanguage(s)})},o.killAll=()=>!!y.length&&(y.forEach(s=>{o.kill(s)}),y=[],!0),o.kill=s=>{if(!s||(s.element||(s=o.getInstance(s)),!s))return!1;s.kill();const e=s.element;return e.dataset.bdpInit=!1,delete e.dataset.bdpInit,E.remove(e,"instance"),F=!1,!0},o.defaults={minYear:null,maxYear:"now",minAge:0,maxAge:100,monthFormat:"short",placeholder:!0,className:null,defaultDate:null,autoInit:!0,leadingZero:!0,locale:"en",selectFuture:!1,arrange:"ymd",yearEl:null,monthEl:null,dayEl:null,roundDownDay:!0},o.init=()=>{if(F)return!1;F=!0,o.createLocale(o.currentLocale);let s=document.querySelectorAll("["+Y+"]");return s.length!==0&&(s.forEach(e=>{new o(e)}),y)},o}),globalThis.getDomData)for(const d of Object.keys(globalThis.getDomData))globalThis[d]=globalThis.getDomData[d];
